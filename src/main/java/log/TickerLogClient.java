package log;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import org.apache.commons.lang.StringUtils;
import org.junit.Test;
import platform.yunbi.market.AbstractMarketApi;
import platform.yunbi.market.bean.Symbol;
import platform.yunbi.market.bean.SymbolPair;

import java.util.TreeMap;
import java.util.concurrent.CompletionService;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

/**
 * 记录云币网 币的每秒信息
 * 记录:   当前成交价格  、数量
 *        当前N档买卖价格与数量
 * Created by handong on 17/5/31.
 */
public class TickerLogClient {

    public static void main(String[] args) {
        ExecutorService threadPool = Executors.newCachedThreadPool();
        CompletionService<Integer> executor = new ExecutorCompletionService<Integer>(threadPool);

        executor.submit(new LogRecordRunnable(Symbol.ans), 1);
        executor.submit(new LogRecordRunnable(Symbol.sc), 1);
        executor.submit(new LogRecordRunnable(Symbol.bts), 1);
        executor.submit(new LogRecordRunnable(Symbol.gnt), 1);


    }



    private static void depth(AbstractMarketApi market, SymbolPair pair) {
        JSONObject depth = market.get_depth(pair, true);
        JSONArray asks = depth.getJSONArray("asks");
        JSONArray bids = depth.getJSONArray("bids");

        JSONObject ask = asks.getJSONObject(0);
        JSONObject bid = bids.getJSONObject(0);

        double askAmount = ask.getDouble("amount");
        double askPrice = ask.getDouble("price");
        double bidAmount = bid.getDouble("amount");
        double bidPrice = bid.getDouble("price");
    }

    @Test
    public void checkAns(){
        System.out.println("--ANS--");
        String ansStr = "7.229-7.15,7.225-7.106,7.229-7.106,7.23-7.229,7.23-7.106,7.23-7.107,7.23-7.11,7.25-7.23,7.25-7.25,7.278-7.26,7.296-7.26,7.297-7.26,7.297-7.261,7.26-7.25,7.26-7.26,7.26-7.25,7.297-7.26,7.297-7.3,7.28-7.26,7.3-7.3,7.3-7.26,7.3-7.28,7.321-7.3,7.33-7.3,7.321-7.3,7.34-7.3,7.45-7.31,7.45-7.35,7.333-7.31,7.333-7.3,7.449-7.333,7.448-7.333,7.448-7.3,7.449-7.448,7.448-7.3,7.448-7.4,7.438-7.4,7.447-7.4,7.447-7.401,7.446-7.401,7.445-7.401,7.444-7.401,7.444-7.301,7.444-7.302,7.401-7.302,7.4-7.302,7.4-7.303,7.39-7.303,7.38-7.303,7.38-7.302,7.301-7.302,7.377-7.301,7.301-7.301,7.377-7.301,7.36-7.301,7.359-7.301,7.301-7.3,7.359-7.3,7.3-7.26,7.29-7.26,7.3-7.26,7.26-7.21,7.26-7.22,7.35-7.22,7.35-7.26,7.3-7.23,7.3-7.232,7.3-7.25,7.3-7.26,7.3-7.25,7.3-7.252,7.34-7.252,7.339-7.252,7.3-7.252,7.29-7.252,7.289-7.252,7.289-7.2,7.201-7.2,7.289-7.201,7.289-7.2,7.289-7.201,7.288-7.201,7.288-7.2,7.288-7.201,7.288-7.202,7.286-7.203,7.288-7.203,7.287-7.205,7.287-7.207,7.287-7.22,7.23-7.22,7.23-7.207,7.22-7.207,7.22-7.21,7.23-7.21,7.288-7.21,7.287-7.21,7.287-7.22,7.286-7.22,7.286-7.222,7.286-7.22,7.285-7.22,7.276-7.22,7.276-7.23,7.276-7.22,7.276-7.221,7.276-7.22,7.22-7.208,7.276-7.208,7.285-7.208,7.285-7.228,7.285-7.285,7.286-7.228,7.285-7.228,7.3-7.228,7.35-7.3,7.35-7.31,7.34-7.31,7.32-7.31,7.32-7.201,7.32-7.203,7.32-7.32,7.34-7.203,7.34-7.204,7.34-7.205,7.34-7.204,7.34-7.205,7.34-7.21,7.34-7.212,7.34-7.215,7.34-7.217,7.34-7.22,7.34-7.221,7.34-7.222,7.34-7.223,7.339-7.223,7.339-7.224,7.339-7.23,7.339-7.34,7.34-7.23,7.3-7.23,7.3-7.231,7.339-7.3,7.338-7.231,7.338-7.232,7.299-7.232,7.338-7.232,7.338-7.3,7.3-7.28,7.338-7.3,7.3-7.28,7.3-7.3,7.338-7.3,7.338-7.301,7.335-7.301,7.338-7.301,7.339-7.301,7.33-7.301,7.339-7.301,7.339-7.302,7.338-7.302,7.339-7.302,7.338-7.302,7.339-7.302,7.34-7.302,7.345-7.34,7.347-7.34,7.348-7.34,7.348-7.345,7.347-7.345,7.347-7.347,7.347-7.345,7.347-7.302,7.346-7.302,7.345-7.302,7.345-7.303,7.344-7.303,7.302-7.302,7.302-7.301,7.302-7.3,7.344-7.3,7.3-7.28,7.344-7.28,7.299-7.28,7.3-7.28,7.3-7.281,7.3-7.28,7.28-7.221,7.3-7.221,7.28-7.221,7.28-7.223,7.3-7.223,7.28-7.223,7.28-7.224,7.3-7.28,7.33-7.28,7.299-7.28,7.33-7.28,7.299-7.28,7.33-7.28,7.27-7.223,7.27-7.23,7.33-7.27,7.27-7.23,7.27-7.231,7.27-7.251,7.27-7.3,7.26-7.251,7.33-7.251,7.299-7.251,7.299-7.252,7.33-7.252,7.3-7.252,7.329-7.252,7.329-7.253,7.301-7.253,7.299-7.253,7.3-7.253,7.3-7.299,7.299-7.253,7.3-7.253,7.301-7.3,7.301-7.253,7.301-7.26,7.301-7.253,7.301-7.26,7.3-7.26,7.301-7.26,7.301-7.253,7.329-7.301,7.329-7.302,7.302-7.301,7.302-7.253,7.301-7.253,7.253-7.253,7.301-7.253,7.3-7.254,7.254-7.254,7.299-7.254,7.251-7.253,7.299-7.253,7.299-7.254,7.299-7.255,7.295-7.255,7.255-7.254,7.295-7.254,7.295-7.255,7.295-7.256,7.29-7.256,7.29-7.257,7.289-7.257,7.29-7.257,7.29-7.29,7.29-7.257,7.29-7.256,7.29-7.257,7.29-7.258,7.29-7.255,7.29-7.251,7.29-7.252,7.29-7.253,7.29-7.255,7.288-7.255,7.288-7.256,7.285-7.256,7.255-7.253,7.255-7.251,7.251-7.25,7.25-7.23,7.251-7.23,7.251-7.215,7.23-7.215,7.23-7.212,7.23-7.213,7.23-7.214,7.251-7.214,7.251-7.23,7.251-7.213,7.251-7.214,7.25-7.214,7.25-7.215,7.25-7.22,7.25-7.215,7.25-7.221,7.25-7.22,7.25-7.221,7.249-7.221,7.25-7.221,7.248-7.221,7.25-7.221,7.254-7.221,7.25-7.221,7.25-7.245,7.25-7.25,7.25-7.245,7.255-7.25,7.287-7.255,7.255-7.221,7.287-7.255,7.288-7.255,7.287-7.255,7.287-7.256,7.287-7.26,7.288-7.287,7.288-7.26,7.289-7.26,7.299-7.29,7.329-7.29,7.329-7.3,7.33-7.299,7.342-7.299,7.342-7.3,7.341-7.3,7.342-7.3,7.34-7.3,7.34-7.299,7.33-7.299,7.33-7.26,7.3-7.26,7.299-7.26,7.299-7.261,7.26-7.26,7.299-7.26,7.299-7.27,7.27-7.26,7.27-7.256,7.299-7.256,7.26-7.256,7.26-7.257,7.26-7.255,7.27-7.255,7.27-7.26,7.255-7.255,7.255-7.24,7.255-7.25,7.255-7.251,7.25-7.24,7.255-7.24,7.254-7.25,7.254-7.212,7.254-7.2,7.2-7.15,7.26-7.15,7.26-7.11,7.26-7.15,7.15-7.111,7.15-7.112,7.112-7.111,7.15-7.112,7.15-7.113,7.12-7.113,7.15-7.12,7.15-7.13,7.26-7.13,7.26-7.131,7.26-7.13,7.113-7.112,7.113-7.111,7.113-7.112,7.26-7.113,7.26-7.114,7.258-7.114,7.26-7.115,7.2-7.115,7.2-7.116,7.2-7.115,7.2-7.15,7.2-7.115,7.2-7.116,7.2-7.117,7.117-7.116,7.2-7.116,7.2-7.117,7.2-7.115,7.2-7.117,7.2-7.15,7.2-7.117,7.15-7.117,7.2-7.116,7.2-7.117,7.2-7.12,7.2-7.115,7.2-7.116,7.2-7.123,7.2-7.125,7.254-7.2,7.2-7.125,7.2-7.126";
        che(ansStr);
        System.out.println("--BTS--");

        String btsStr = "0.4796-0.4774,0.4796-0.4775,0.4796-0.4776,0.4819-0.48,0.4819-0.4776,0.4819-0.4778,0.4818-0.4778,0.4818-0.48,0.4818-0.4801,0.4818-0.48,0.4819-0.48,0.4819-0.4778,0.4818-0.4778,0.481-0.4778,0.481-0.478,0.4809-0.478,0.4809-0.479,0.4809-0.48,0.4809-0.4801,0.4809-0.48,0.4809-0.4801,0.48-0.479,0.4809-0.479,0.479-0.478,0.4809-0.479,0.4809-0.4791,0.4809-0.4799,0.4809-0.4791,0.4809-0.48,0.481-0.4809,0.481-0.48,0.4809-0.48,0.4809-0.4801,0.4809-0.4809,0.481-0.4809,0.4819-0.4809,0.4819-0.481,0.4848-0.481,0.4848-0.4815,0.4847-0.4815,0.4846-0.4815,0.4849-0.4848,0.485-0.4848,0.4848-0.4815,0.485-0.4815,0.4848-0.4815,0.4848-0.485,0.485-0.4815,0.4848-0.4815,0.4848-0.4828,0.4848-0.4829,0.4847-0.4829,0.4846-0.4829,0.4847-0.4829,0.484-0.4829,0.4829-0.4828,0.484-0.4828,0.484-0.4829,0.484-0.4828,0.484-0.483,0.484-0.4829,0.4839-0.4829,0.484-0.4829,0.484-0.4839,0.484-0.4829,0.4857-0.485,0.486-0.485,0.489-0.488,0.489-0.486,0.488-0.483,0.4888-0.488,0.488-0.483,0.4879-0.485,0.4886-0.4879,0.4886-0.486,0.4886-0.4879,0.4888-0.4879,0.4888-0.4886,0.489-0.4886,0.4898-0.489,0.4898-0.4886,0.489-0.4886,0.4898-0.4886,0.489-0.4886,0.489-0.4861,0.489-0.487,0.4897-0.487,0.4896-0.487,0.4895-0.4863,0.4895-0.487,0.4896-0.487,0.4897-0.4871,0.4896-0.4871,0.4886-0.4871,0.4886-0.487,0.4886-0.4886,0.4886-0.487,0.4885-0.487,0.487-0.4863,0.4885-0.4863,0.4863-0.4861,0.4885-0.4863,0.4885-0.4864,0.4884-0.4864,0.4884-0.487,0.4884-0.4864,0.4885-0.4864,0.4885-0.4884,0.4886-0.4884,0.4895-0.4886,0.4895-0.4884,0.4895-0.4885,0.4896-0.4885,0.491-0.4885,0.4933-0.4885,0.4966-0.4885,0.4966-0.496,0.4968-0.4966,0.4995-0.499,0.5-0.499,0.499-0.5,0.499-0.4885,0.5-0.4885,0.5-0.499,0.499-0.4885,0.499-0.49,0.4999-0.499,0.5-0.4999,0.499-0.49,0.4949-0.49,0.499-0.4949,0.5003-0.499,0.501-0.499,0.5003-0.499,0.501-0.499,0.501-0.501,0.501-0.499,0.501-0.4995,0.5008-0.4995,0.5008-0.4991,0.5-0.4991,0.4995-0.4991,0.5-0.4995,0.5008-0.4995,0.5008-0.5008,0.501-0.4995,0.501-0.5,0.5018-0.501,0.501-0.5008,0.502-0.5018,0.5028-0.502,0.502-0.501,0.5029-0.501,0.5-0.5,0.5035-0.5011,0.5035-0.502,0.504-0.5035,0.504-0.504,0.5048-0.504,0.5048-0.5035,0.505-0.504,0.505-0.5035,0.5049-0.5035,0.5049-0.504,0.5035-0.501,0.5035-0.503,0.5035-0.5025,0.503-0.5025,0.5025-0.501,0.5049-0.5035,0.5049-0.5049,0.505-0.5035,0.5045-0.5035,0.505-0.5035,0.5049-0.5035,0.505-0.5049,0.505-0.505,0.506-0.505,0.505-0.5035,0.505-0.5049,0.506-0.5049,0.5064-0.506,0.5064-0.5049,0.506-0.5049,0.506-0.505,0.5063-0.505,0.505-0.5049,0.5063-0.505,0.506-0.505,0.505-0.505,0.506-0.505,0.505-0.5049,0.505-0.5036,0.5049-0.5036,0.5048-0.5036,0.5048-0.5035,0.5048-0.5036,0.5047-0.5036,0.5047-0.5037,0.5047-0.5036,0.5047-0.5037,0.5047-0.5036,0.5037-0.5036,0.5036-0.5035,0.5036-0.5036,0.5035-0.5026,0.5035-0.5027,0.5037-0.5036,0.5037-0.5035,0.5037-0.503,0.5036-0.503,0.5037-0.5036,0.5036-0.503,0.5037-0.503,0.5037-0.5035,0.5036-0.5035,0.5036-0.503,0.5035-0.503,0.5027-0.5027,0.5035-0.5027,0.5035-0.5026,0.5035-0.5032,0.5035-0.5026,0.5035-0.5027,0.5026-0.5026,0.5026-0.5025,0.5025-0.502,0.5-0.5,0.5-0.4991,0.5025-0.4991,0.5025-0.5,0.502-0.5,0.502-0.4901,0.502-0.4902,0.502-0.4903,0.501-0.5,0.501-0.4903,0.501-0.5,0.5-0.4904,0.501-0.5,0.502-0.5,0.5024-0.501,0.5024-0.5001,0.5024-0.5,0.5023-0.5,0.5023-0.4911,0.5-0.4911,0.5-0.4913,0.5-0.492,0.502-0.5,0.5-0.492,0.4999-0.492,0.499-0.492,0.5-0.492,0.5-0.4999,0.5-0.492,0.5-0.4925,0.5024-0.4925,0.5024-0.5,0.5024-0.4925,0.5026-0.4925,0.5026-0.4926,0.5026-0.493,0.5024-0.493,0.5024-0.4931,0.5024-0.4935,0.5024-0.5,0.5035-0.5,0.5035-0.5024,0.5034-0.5024,0.5026-0.5024,0.5026-0.5025,0.5-0.4936,0.501-0.4936,0.501-0.5,0.5-0.495,0.5-0.499,0.5-0.5,0.501-0.5,0.5-0.5,0.5-0.499,0.5-0.5,0.5005-0.499,0.5-0.499,0.501-0.5,0.5024-0.5,0.5024-0.5001,0.5024-0.502,0.5025-0.502,0.5025-0.5021,0.502-0.501,0.502-0.5013,0.502-0.5015,0.4995-0.499,0.502-0.499,0.502-0.495,0.5019-0.495,0.501-0.4951,0.4955-0.4951,0.4955-0.495,0.4951-0.495,0.4955-0.5,0.501-0.5,0.5005-0.5,0.5-0.495,0.5-0.4951,0.5-0.495,0.5-0.496,0.5-0.495,0.5-0.4951,0.4999-0.4951,0.495-0.4945,0.4949-0.4945,0.495-0.4949,0.494-0.492,0.4939-0.492,0.4939-0.4915,0.492-0.4915,0.4939-0.4916,0.492-0.4916,0.492-0.4919,0.493-0.4919,0.493-0.4916,0.493-0.4915,0.493-0.4916,0.493-0.4919,0.493-0.4916,0.4916-0.4915,0.493-0.4915,0.493-0.4916,0.493-0.4917,0.493-0.4918,0.4918-0.4917,0.4918-0.4916,0.4916-0.4915,0.4918-0.4915,0.4916-0.4915,0.4918-0.4916,0.493-0.4916,0.493-0.4918,0.4928-0.4918,0.4918-0.4918,0.4928-0.4918,0.492-0.4918,0.492-0.4919,0.4928-0.4919,0.4928-0.492,0.492-0.4919,0.492-0.4918,0.492-0.4917,0.492-0.4916,0.4919-0.4916,0.4919-0.4915,0.4919-0.4903,0.4918-0.4903,0.4903-0.4902,0.4915-0.4903,0.4915-0.4902,0.4914-0.4902,0.4914-0.4903,0.49-0.4902,0.4914-0.49,0.491-0.49,0.49-0.4899,0.492-0.4919,0.4916-0.4899,0.4916-0.49,0.4916-0.4899,0.4916-0.49,0.49-0.4899,0.4915-0.49,0.4916-0.4915,0.4916-0.4916,0.4916-0.4915,0.4919-0.4915,0.4915-0.4901,0.4915-0.49,0.4919-0.49,0.4919-0.4915,0.4919-0.49,0.4915-0.49,0.4915-0.4901,0.4919-0.4915,0.4918-0.4915,0.4915-0.4901,0.4918-0.4901,0.4918-0.4902,0.4915-0.4902,0.4915-0.4901,0.4915-0.4866,0.4915-0.4865,0.4914-0.4865,0.4866-0.4863,0.4866-0.486,0.4913-0.486,0.4866-0.486,0.4866-0.4861,0.4913-0.4861,0.4866-0.4861,0.4913-0.4866,0.4913-0.4867,0.49-0.4867,0.49-0.4888,0.49-0.4818,0.49-0.4819,0.49-0.482,0.49-0.4819,0.49-0.482,0.4895-0.482,0.4895-0.4821,0.49-0.4821,0.49-0.4822,0.49-0.4823,0.4913-0.49,0.49-0.4823,0.4913-0.4823,0.4915-0.4913,0.4915-0.4823,0.4914-0.4823,0.4914-0.4825,0.4914-0.4826,0.4914-0.4825,0.4914-0.4826,0.4913-0.4826,0.4913-0.483,0.4913-0.4831,0.4915-0.4913,0.4919-0.4831,0.4913-0.4831,0.4913-0.4913,0.4919-0.4831,0.4919-0.4913,0.4919-0.4908,0.492-0.4919,0.492-0.4908,0.4928-0.492,0.4928-0.4921,0.4928-0.4924,0.4928-0.492,0.4927-0.492,0.493-0.4928,0.4939-0.4928,0.4939-0.493,0.4939-0.4939,0.4949-0.4939,0.4949-0.494,0.495-0.494,0.495-0.495,0.497-0.495,0.497-0.496,0.499-0.498,0.4998-0.499,0.5-0.499,0.499-0.498,0.499-0.4985,0.4989-0.4985,0.499-0.4985,0.4989-0.4985,0.498-0.495,0.4979-0.495,0.4979-0.4979,0.4979-0.495,0.4979-0.493,0.4989-0.493,0.4988-0.493,0.4989-0.4988,0.4989-0.493,0.4988-0.493,0.4988-0.4931,0.4988-0.493,0.493-0.4927,0.4927-0.49,0.4927-0.4901,0.4927-0.491,0.493-0.491,0.4988-0.493,0.499-0.493,0.495-0.4931,0.495-0.491,0.4997-0.495,0.495-0.491,0.495-0.4935,0.495-0.4997,0.4998-0.4935,0.4999-0.4935,0.4999-0.4998,0.4998-0.4935,0.4999-0.4935,0.4999-0.4936,0.4999-0.4949,0.4998-0.4949,0.5-0.4949,0.5-0.4998,0.5-0.5,0.5-0.4998,0.5002-0.4998,0.5-0.4998,0.5-0.5002,0.5-0.4998,0.502-0.5,0.5034-0.4998,0.5036-0.5034,0.504-0.5036,0.504-0.5034,0.5039-0.5034,0.5039-0.5,0.5034-0.5,0.5039-0.5,0.5-0.4998,0.4998-0.4998,0.5-0.496,0.5039-0.5,0.5-0.5,0.5039-0.4961,0.5-0.4961,0.5-0.4965,0.5-0.4966,0.4999-0.4966,0.5-0.4966,0.5-0.4961,0.5025-0.5,0.501-0.5,0.501-0.4961,0.5-0.4961,0.501-0.4961,0.5009-0.4962,0.5-0.4962,0.498-0.4962,0.498-0.496,0.498-0.4961,0.498-0.496,0.498-0.4961,0.498-0.497,0.498-0.498,0.498-0.497,0.4975-0.497,0.498-0.497,0.5-0.498,0.4995-0.498,0.5-0.4995,0.4999-0.4995,0.4995-0.4981,0.4999-0.4981,0.4999-0.4995,0.4995-0.4981,0.5-0.4981";
        che(btsStr);
        System.out.println("--SC--");

        String scStr = "0.0534-0.05339,0.0534-0.0534,0.05341-0.05339,0.0534-0.05334,0.0534-0.05328,0.05328-0.05328,0.0534-0.05336,0.0534-0.05332,0.0534-0.05321,0.0534-0.05322,0.0534-0.05311,0.0534-0.05317,0.0534-0.05309,0.05338-0.05306,0.05338-0.05311,0.05301-0.05311,0.05332-0.05311,0.05306-0.05301,0.05306-0.05298,0.05317-0.05298,0.05317-0.05294,0.05317-0.053,0.05317-0.05306,0.05317-0.05316,0.0533-0.05303,0.0534-0.05336,0.0534-0.053,0.05333-0.05306,0.05334-0.05311,0.05334-0.05333,0.05343-0.05333,0.05343-0.05311,0.05343-0.05313,0.0534-0.05312,0.05339-0.05312,0.05339-0.05313,0.05339-0.05318,0.05339-0.05319,0.05339-0.05318,0.05339-0.05319,0.05339-0.05322,0.05345-0.05322,0.05344-0.05325,0.05344-0.05334,0.0535-0.05334,0.0535-0.05325,0.05334-0.05325,0.0535-0.05334,0.0535-0.05324,0.05325-0.05324,0.0535-0.05324,0.0535-0.05325,0.0535-0.05324,0.0535-0.05333,0.05351-0.05333,0.05353-0.05333,0.0535-0.05333,0.0535-0.05343,0.0535-0.05325,0.0535-0.05327,0.0535-0.05328,0.0535-0.05329,0.0535-0.05331,0.0535-0.05333,0.0535-0.05337,0.05337-0.05333,0.05337-0.05331,0.0535-0.05331,0.05349-0.05331,0.05345-0.05331,0.05345-0.05329,0.05331-0.05329,0.05329-0.05328,0.0535-0.05349,0.05349-0.05349,0.05349-0.05338,0.05338-0.05335,0.05338-0.05327,0.05327-0.05326,0.05327-0.05325,0.05338-0.05327,0.05338-0.05326,0.05338-0.05327,0.05338-0.05328,0.05338-0.05329,0.05338-0.05328,0.05338-0.05329,0.05338-0.05328,0.05338-0.05329,0.05338-0.05328,0.05349-0.0534,0.0535-0.05349,0.05351-0.0535,0.05351-0.05351,0.05355-0.05351,0.05354-0.05351,0.05357-0.05351,0.05357-0.05354,0.05357-0.05355,0.05355-0.05354,0.05355-0.05339,0.0535-0.05339,0.0535-0.05328,0.0535-0.05331,0.0534-0.05331,0.05354-0.0534,0.05355-0.0534,0.0534-0.05331,0.05355-0.05331,0.0534-0.05331,0.05333-0.05328,0.05355-0.0535,0.05354-0.0535,0.0535-0.05333,0.0535-0.05328,0.05333-0.05328,0.0535-0.05328,0.05355-0.0535,0.05355-0.05328,0.05356-0.05355,0.05358-0.05355,0.05359-0.05355,0.0536-0.05356,0.05358-0.05356,0.05364-0.05363,0.05363-0.05358,0.05365-0.0536,0.05364-0.0536,0.05364-0.05362,0.05365-0.05364,0.05364-0.05345,0.05364-0.05326,0.05358-0.05334,0.05362-0.05335,0.05364-0.05358,0.05356-0.05335,0.05369-0.05368,0.05364-0.05331,0.05358-0.05331,0.05364-0.05335,0.05363-0.05339,0.05363-0.05345,0.05364-0.05345,0.05367-0.05364,0.05371-0.0537,0.05373-0.0537,0.05389-0.0537,0.05385-0.0537,0.0538-0.05376,0.0538-0.05377,0.05385-0.0538,0.05399-0.0538,0.0539-0.05385,0.0539-0.05387,0.05395-0.05387,0.05385-0.05387,0.05395-0.05388,0.05394-0.05388,0.05394-0.0539,0.05393-0.0539,0.0539-0.05388,0.0539-0.05389,0.05387-0.05385,0.0538-0.05377,0.0538-0.05365,0.0538-0.05369,0.0537-0.05369,0.05393-0.0539,0.05393-0.05369,0.05393-0.0539,0.05393-0.05383,0.05393-0.0539,0.0537-0.05369,0.05369-0.05367,0.0537-0.05366,0.05393-0.0537,0.05393-0.05375,0.05394-0.05375,0.05394-0.05393,0.05394-0.05381,0.05382-0.05375,0.05382-0.05371,0.05393-0.05382,0.05395-0.05394,0.05393-0.05388,0.05392-0.05388,0.05392-0.05385,0.05392-0.05372,0.05392-0.05371,0.05393-0.05371,0.05393-0.05385,0.05395-0.05385,0.05395-0.0539,0.05395-0.05385,0.05395-0.05393,0.05393-0.05385,0.05395-0.05386,0.05396-0.05395,0.05396-0.05372,0.05395-0.05372,0.05385-0.05372,0.05385-0.05373,0.05385-0.05375,0.05395-0.05375,0.05396-0.05375,0.05395-0.0538,0.05396-0.0538,0.05397-0.05396,0.05397-0.05397,0.05397-0.05395,0.05396-0.05395,0.05396-0.05396,0.05396-0.05395,0.05399-0.05395,0.05399-0.05396,0.05396-0.05395,0.05395-0.05395,0.05395-0.0538,0.05395-0.05395,0.05395-0.05381,0.05381-0.0538,0.05394-0.0538,0.05394-0.05381,0.0538-0.05379,0.0538-0.05378,0.0538-0.05376,0.05393-0.0538,0.05393-0.05376,0.0538-0.05376,0.0538-0.05377,0.05393-0.0538,0.05395-0.05395,0.05396-0.05395,0.05396-0.0538,0.05396-0.05395,0.05396-0.0538,0.05395-0.0538,0.05396-0.0538,0.05394-0.0538,0.05396-0.0538,0.05396-0.05394,0.05396-0.05395,0.0538-0.05377,0.05395-0.05377,0.05395-0.0538,0.05395-0.05395,0.05395-0.0538,0.0538-0.05378,0.05395-0.05378,0.0538-0.05378,0.05395-0.05378,0.05395-0.0538,0.05395-0.05381,0.05395-0.05383,0.05395-0.05384,0.05394-0.05384,0.05393-0.05384,0.05394-0.05384,0.05395-0.05393,0.05392-0.05384,0.05392-0.05389,0.05392-0.05378,0.05393-0.05378,0.05395-0.05378,0.05396-0.05378,0.05396-0.0538,0.05396-0.05393,0.05393-0.05381,0.05396-0.05381,0.05396-0.05378,0.05396-0.05379,0.05395-0.05379,0.05395-0.0538,0.05394-0.0538,0.05395-0.0538,0.05395-0.05381,0.05395-0.05385,0.05393-0.05385,0.05395-0.05385,0.05395-0.05387,0.0539-0.05387,0.05394-0.05387,0.05395-0.05387,0.05396-0.05387,0.05396-0.0539,0.05395-0.0539,0.05396-0.0539,0.05399-0.05396,0.054-0.05396,0.05401-0.054,0.05411-0.05401,0.05426-0.05424,0.05428-0.05426,0.05428-0.0543,0.05434-0.0543,0.0544-0.05426,0.05444-0.0544,0.05449-0.05448,0.0545-0.05448,0.0545-0.0545,0.05455-0.0545,0.05458-0.0545,0.05458-0.05456,0.0546-0.05458,0.05483-0.0548,0.0549-0.0548,0.05496-0.0549,0.05493-0.05492,0.05496-0.05492,0.05496-0.0549,0.05497-0.05496,0.05497-0.05498,0.05499-0.05497,0.05499-0.05499,0.055-0.05499,0.055-0.055,0.055-0.05497,0.05501-0.055,0.05505-0.05502,0.0551-0.05505,0.0552-0.05505,0.05549-0.05545,0.0555-0.0555,0.05556-0.05555,0.05574-0.05572,0.05588-0.0558,0.05596-0.0559,0.0559-0.05588,0.05598-0.05588,0.05611-0.056,0.0563-0.05628,0.0564-0.05635,0.05649-0.05644,0.0565-0.05644,0.0565-0.05649,0.05651-0.0565,0.05652-0.05651,0.05679-0.05677,0.0568-0.05679,0.05681-0.0568,0.0569-0.05689,0.05695-0.0569,0.05699-0.05695,0.0569-0.05681,0.05699-0.0569,0.057-0.05691,0.05703-0.057,0.0571-0.05703,0.05711-0.0571,0.0572-0.05711,0.0572-0.05712,0.05748-0.05738,0.05748-0.0572,0.05748-0.05721,0.0574-0.05721,0.0569-0.0564,0.0568-0.0564,0.0564-0.0569,0.0569-0.0567,0.057-0.0569,0.0563-0.056,0.056-0.05501,0.05564-0.05536,0.05564-0.05511,0.05589-0.05586,0.05589-0.0555,0.05536-0.05512,0.05536-0.05513,0.0553-0.05512,0.0553-0.05513,0.0553-0.0553,0.05538-0.0553,0.055-0.05499,0.05513-0.055,0.05538-0.055,0.05533-0.05506,0.05513-0.055,0.05533-0.05513,0.05513-0.055,0.05513-0.05533,0.0551-0.05533,0.05539-0.05538,0.05576-0.05538,0.05552-0.05538,0.056-0.05538,0.056-0.05539,0.056-0.0554,0.05614-0.056,0.05559-0.05556,0.05629-0.05556,0.056-0.05559,0.05598-0.05559,0.05598-0.05557,0.05598-0.05559,0.05597-0.05559,0.05598-0.05597,0.05598-0.05559,0.05597-0.0556,0.05598-0.05597,0.05598-0.0556,0.05597-0.0557,0.05597-0.05571,0.05597-0.0558,0.05597-0.0557,0.0558-0.0557,0.05596-0.0558,0.05597-0.0557,0.05598-0.05575,0.05597-0.05575,0.056-0.05597,0.056-0.05575,0.0558-0.05575,0.05597-0.0558,0.05597-0.05581,0.05598-0.05597,0.056-0.05597,0.05598-0.05597,0.05597-0.05581,0.05598-0.05597,0.056-0.05597,0.05598-0.05597,0.056-0.05597,0.056-0.056,0.05615-0.056,0.05617-0.05615,0.05617-0.056,0.0561-0.056,0.056-0.05597,0.056-0.05583,0.056-0.05593,0.0561-0.056,0.05617-0.0561,0.0561-0.056,0.056-0.05593,0.056-0.056,0.056-0.05593,0.05593-0.05648,0.05649-0.05648,0.05649-0.0561,0.05648-0.056,0.05648-0.05601,0.056-0.05593,0.0561-0.056,0.0561-0.05593,0.056-0.05593,0.0561-0.056,0.0564-0.0561,0.056-0.05593,0.0561-0.05605,0.05637-0.0561,0.05637-0.05605,0.05638-0.05637,0.05637-0.05605,0.05637-0.0561,0.05647-0.05646,0.05646-0.05637,0.05646-0.05646,0.05648-0.05646,0.05649-0.05646,0.0565-0.05648,0.05651-0.0565,0.0565-0.0561,0.05649-0.05611,0.05652-0.0565,0.05652-0.05612,0.05648-0.05612,0.05647-0.05613,0.05646-0.05611,0.05613-0.05612,0.05613-0.05611,0.0564-0.05613,0.05613-0.0561,0.0561-0.05606,0.056-0.05601,0.0561-0.05601,0.0555-0.0555,0.0555-0.0554,0.0559-0.0555,0.056-0.0555,0.056-0.05551,0.056-0.05552,0.056-0.05555,0.056-0.05554,0.05599-0.05554,0.05599-0.05555,0.05599-0.05557,0.05598-0.0556,0.05598-0.05561,0.05596-0.05561,0.0559-0.05561,0.0557-0.05561,0.05567-0.05561,0.05589-0.05561,0.05578-0.05562,0.0556-0.05555,0.05561-0.05555,0.05561-0.0555,0.05561-0.0554,0.0555-0.0554,0.05539-0.05531,0.05539-0.05515,0.0553-0.05515,0.05515-0.05513,0.05515-0.05514,0.05525-0.05514,0.05515-0.0551,0.05525-0.0551,0.05525-0.05515,0.05525-0.05514,0.05525-0.0551,0.05514-0.0551,0.0551-0.05501,0.0551-0.05502,0.0551-0.05501,0.05501-0.05499,0.05501-0.0545,0.055-0.0545,0.05462-0.05451,0.05484-0.0544,0.05451-0.0544,0.05481-0.05451,0.05499-0.0543,0.05499-0.05484,0.05498-0.05478,0.05484-0.054,0.05484-0.05474,0.05484-0.05401,0.05403-0.05401,0.05484-0.05403,0.05484-0.05404,0.05457-0.05403,0.05457-0.0543,0.05499-0.0543,0.0549-0.0543,0.05489-0.0543,0.05488-0.0543,0.05472-0.05489,0.0549-0.05489,0.05499-0.05489,0.05529-0.05501,0.0553-0.05501,0.0553-0.05529,0.05529-0.05501,0.05528-0.05501,0.05528-0.055,0.055-0.05445,0.05528-0.055,0.055-0.0546,0.05494-0.05466,0.055-0.05466,0.055-0.055,0.055-0.05494,0.05494-0.05466,0.055-0.05466,0.05499-0.05466,0.055-0.05466,0.05528-0.05499,0.05529-0.05499,0.055-0.05466,0.05529-0.055,0.0553-0.055,0.0555-0.0553,0.0553-0.055,0.05549-0.0553,0.05528-0.05466,0.0555-0.05549,0.05548-0.05549,0.05548-0.055,0.05548-0.0548,0.05548-0.05482,0.05547-0.055,0.05546-0.055,0.05546-0.05482,0.0553-0.055,0.055-0.05482,0.055-0.05485,0.0553-0.05485,0.055-0.05486,0.055-0.05485,0.05499-0.05485,0.055-0.05499,0.0553-0.05499,0.0553-0.0548,0.05499-0.0548,0.0553-0.05481,0.0553-0.055,0.0553-0.05501,0.0553-0.055,0.0553-0.05501,0.05539-0.05501,0.05539-0.0551,0.05538-0.0551,0.0553-0.0551,0.0553-0.05511,0.0553-0.05515,0.0553-0.0551,0.0553-0.05511,0.0552-0.05512,0.0552-0.05511,0.05511-0.0551,0.0552-0.0551,0.0551-0.05507,0.0551-0.05503,0.05519-0.05503,0.05507-0.05501,0.05507-0.055,0.05501-0.055,0.055-0.0548,0.05499-0.0548,0.055-0.0548,0.05507-0.055,0.055-0.0548,0.055-0.055,0.05507-0.055,0.05519-0.05501,0.0552-0.05501,0.0552-0.05504,0.0553-0.05529,0.05529-0.0552,0.0553-0.0551,0.05538-0.0551,0.05538-0.05511,0.05538-0.05515,0.0552-0.05517,0.05539-0.05517,0.05545-0.05517,0.05538-0.05517,0.05538-0.05518,0.05538-0.05517,0.05545-0.05517,0.05545-0.05538,0.05538-0.05518,0.05538-0.05519,0.05538-0.0552,0.0555-0.05545,0.05555-0.05545,0.0554-0.05538,0.05538-0.0552,0.0554-0.05521,0.05545-0.0554,0.0554-0.05525,0.05545-0.0554,0.05545-0.05541,0.05555-0.05541,0.05556-0.05541,0.05578-0.05541,0.05578-0.05555,0.05578-0.05556,0.05578-0.05555,0.05578-0.05556,0.0556-0.05556,0.0556-0.0556,0.05569-0.0556,0.05578-0.0556,0.05573-0.0556,0.05573-0.05561,0.05578-0.05573,0.05578-0.05561,0.0558-0.05578,0.05573-0.05561,0.0558-0.05573,0.05572-0.05561,0.0558-0.05561,0.05584-0.05561,0.05561-0.0556,0.05584-0.05561,0.0558-0.05561,0.05579-0.05561,0.05579-0.05562,0.0558-0.05579,0.05579-0.05562,0.05579-0.05574,0.05574-0.0557,0.05573-0.0557,0.05588-0.0557,0.05588-0.05571,0.05595-0.05588,0.05595-0.0557,0.0557-0.05563,0.0557-0.05564,0.0557-0.05565,0.05565-0.05565,0.0557-0.05565,0.05595-0.0557,0.0558-0.0557,0.05579-0.0557,0.0557-0.0557,0.05579-0.0557,0.0558-0.0557,0.05579-0.0557,0.05579-0.05563,0.05579-0.0556,0.0557-0.0556,0.05579-0.0557,0.05579-0.0556,0.05575-0.0556,0.05575-0.05556,0.05575-0.0557,0.05579-0.0557,0.05574-0.05579,0.05574-0.05565,0.0557-0.05565,0.0557-0.05522,0.0557-0.05525,0.05574-0.0557,0.0557-0.05525,0.05579-0.05525,0.05525-0.05522,0.05525-0.055,0.05525-0.0549,0.0552-0.0549,0.0552-0.055,0.0557-0.055,0.0557-0.0552,0.0557-0.0548,0.0557-0.05523,0.0557-0.055,0.05569-0.055,0.05566-0.055,0.05569-0.055,0.05569-0.0548,0.055-0.0548,0.055-0.05481,0.055-0.0548,0.0547-0.05466,0.0547-0.05469,0.0547-0.05466,0.05469-0.05466,0.05469-0.05467,0.05469-0.05468,0.05469-0.05469,0.0548-0.05469,0.05481-0.0548,0.0548-0.0548,0.05481-0.0548,0.055-0.0548,0.05503-0.0548,0.05568-0.0548,0.05568-0.05481,0.05568-0.055,0.05555-0.055,0.05554-0.055,0.05568-0.055,0.05555-0.055,0.05555-0.0553,0.05555-0.0554,0.05565-0.0554,0.0557-0.05565,0.05569-0.05565,0.05574-0.05567,0.05579-0.05578,0.05579-0.05579,0.0558-0.05578,0.0558-0.05579,0.05585-0.05579,0.05585-0.05578,0.056-0.056,0.05609-0.056,0.05609-0.05579,0.0558-0.05578,0.05645-0.05637,0.05645-0.05578,0.056-0.05578,0.05686-0.0568,0.05686-0.05578,0.05688-0.05669,0.05688-0.05665,0.05686-0.05665,0.05637-0.056,0.05637-0.05605,0.05633-0.05605,0.05633-0.056,0.05633-0.05605,0.05636-0.05605,0.05637-0.05636,0.05637-0.05623,0.05637-0.056,0.05605-0.056,0.05617-0.056,0.05617-0.05616,0.05644-0.05637,0.0565-0.05637,0.05651-0.05637,0.05651-0.0565,0.05651-0.05637,0.05651-0.0565,0.05589-0.05578,0.05589-0.05589,0.056-0.05578,0.05599-0.05578,0.05599-0.05557,0.05578-0.05557,0.0557-0.05557,0.05579-0.05557,0.05579-0.0557,0.05579-0.05557,0.05582-0.0557,0.05582-0.05579,0.05582-0.0557,0.056-0.0557,0.05578-0.0557,0.0559-0.05579,0.0559-0.05582,0.0559-0.05579,0.0559-0.0558,0.0559-0.05582,0.056-0.0559,0.05603-0.0559,0.05603-0.056,0.05603-0.0559";
        che(scStr);
        System.out.println("--GNT--");

        String gntStr = "3.487-3.452,3.487-3.451,3.486-3.451,3.485-3.451,3.486-3.451,3.484-3.451,3.48-3.452,3.451-3.452,3.48-3.452,3.484-3.452,3.484-3.453,3.453-3.453,3.453-3.452,3.484-3.452,3.453-3.452,3.484-3.452,3.48-3.452,3.48-3.453,3.48-3.452,3.48-3.453,3.453-3.452,3.48-3.452,3.48-3.453,3.48-3.452,3.48-3.45,3.455-3.45,3.455-3.451,3.452-3.451,3.452-3.45,3.45-3.435,3.45-3.44,3.45-3.435,3.44-3.435,3.449-3.435,3.435-3.435,3.449-3.435,3.435-3.43,3.449-3.43,3.435-3.43,3.449-3.43,3.446-3.43,3.449-3.43,3.45-3.449,3.45-3.43,3.449-3.43,3.449-3.435,3.449-3.43,3.435-3.43,3.449-3.435,3.449-3.43,3.43-3.43,3.449-3.43,3.448-3.43,3.447-3.43,3.447-3.4,3.435-3.4,3.435-3.32,3.435-3.321,3.435-3.322,3.4-3.322,3.4-3.33,3.4-3.331,3.4-3.336,3.397-3.336,3.398-3.336,3.39-3.336,3.39-3.337,3.386-3.338,3.39-3.338,3.39-3.339,3.39-3.34,3.39-3.39,3.398-3.338,3.398-3.341,3.4-3.341,3.398-3.341,3.341-3.341,3.398-3.341,3.398-3.342,3.398-3.343,3.398-3.344,3.398-3.345,3.399-3.345,3.399-3.346,3.399-3.347,3.399-3.348,3.399-3.35,3.399-3.351,3.398-3.351,3.398-3.352,3.398-3.348,3.398-3.349,3.397-3.349,3.395-3.349,3.392-3.348,3.391-3.348,3.39-3.348,3.388-3.348,3.39-3.348,3.374-3.348,3.377-3.348,3.36-3.348,3.36-3.349,3.36-3.35,3.358-3.35,3.358-3.351,3.36-3.351,3.355-3.351,3.353-3.351,3.36-3.351,3.351-3.35,3.355-3.351,3.36-3.351,3.357-3.351,3.36-3.35,3.355-3.35,3.36-3.35,3.358-3.35,3.359-3.35,3.355-3.35,3.359-3.35,3.36-3.35,3.36-3.349,3.358-3.349,3.35-3.349,3.35-3.348,3.349-3.348,3.345-3.338,3.349-3.338,3.345-3.338,3.345-3.341,3.345-3.338,3.345-3.341,3.345-3.338,3.345-3.341,3.345-3.338,3.344-3.338,3.345-3.338,3.35-3.338,3.358-3.338,3.35-3.338,3.358-3.351,3.36-3.338,3.36-3.344,3.359-3.344,3.344-3.338,3.359-3.338,3.338-3.321,3.357-3.321,3.356-3.321,3.355-3.321,3.354-3.321,3.353-3.321,3.352-3.321,3.351-3.321,3.337-3.321,3.335-3.321,3.328-3.321,3.335-3.321,3.336-3.321,3.335-3.321,3.328-3.321,3.321-3.321,3.328-3.321,3.335-3.321,3.321-3.32,3.335-3.32,3.335-3.322,3.321-3.32,3.335-3.321,3.335-3.33,3.333-3.33,3.333-3.321,3.333-3.33,3.331-3.33,3.333-3.33,3.33-3.321,3.329-3.321,3.333-3.321,3.333-3.32,3.32-3.32,3.333-3.32,3.32-3.3,3.333-3.3,3.333-3.321,3.333-3.3,3.274-3.271,3.3-3.271,3.3-3.232,3.3-3.233,3.3-3.234,3.3-3.235,3.3-3.236,3.333-3.3,3.333-3.236,3.354-3.267,3.346-3.268,3.344-3.268,3.342-3.27,3.342-3.271,3.342-3.272,3.341-3.272,3.34-3.272,3.339-3.272,3.338-3.272,3.338-3.274,3.337-3.274,3.336-3.274,3.34-3.274,3.339-3.274,3.341-3.274,3.338-3.274,3.341-3.274,3.34-3.274,3.341-3.274,3.341-3.281,3.34-3.291,3.354-3.291,3.352-3.291,3.351-3.3,3.35-3.3,3.348-3.3,3.347-3.3,3.346-3.3,3.345-3.3,3.344-3.3,3.355-3.3,3.354-3.3,3.353-3.3,3.353-3.301,3.349-3.301,3.348-3.301,3.347-3.301,3.346-3.301,3.345-3.301,3.345-3.302,3.348-3.302,3.347-3.302,3.348-3.302,3.347-3.302,3.346-3.302,3.347-3.302,3.347-3.301,3.347-3.3,3.347-3.301,3.347-3.3,3.347-3.301,3.346-3.3,3.346-3.301,3.347-3.31,3.346-3.31,3.346-3.302,3.341-3.302,3.347-3.302,3.343-3.302,3.343-3.303,3.343-3.302,3.303-3.302,3.342-3.302,3.32-3.302,3.319-3.302,3.318-3.303,3.317-3.303,3.316-3.303,3.315-3.303,3.314-3.303,3.302-3.303,3.314-3.302,3.314-3.3,3.314-3.304,3.314-3.3,3.303-3.3,3.303-3.303,3.303-3.3,3.303-3.303,3.303-3.3,3.3-3.238,3.3-3.239,3.3-3.24,3.3-3.241,3.3-3.242,3.299-3.242,3.3-3.242,3.3-3.244,3.33-3.244,3.329-3.3,3.328-3.3,3.327-3.3,3.325-3.3,3.324-3.3,3.338-3.3,3.336-3.3,3.335-3.3,3.333-3.3,3.324-3.3,3.319-3.3,3.318-3.3,3.317-3.3,3.318-3.3,3.315-3.3,3.31-3.3,3.3-3.247,3.3-3.248,3.3-3.249,3.315-3.3,3.315-3.249,3.309-3.249,3.309-3.25,3.315-3.251,3.315-3.252,3.315-3.253";
        che(gntStr);
    }

    private void che(String ansStr) {
        String[] ansArray = StringUtils.split(ansStr, ",");

        double higher = 0;
        double lower  = 0;
//        int flag = 0;

        double bP,sP =0;
        boolean sellFlag =false;
        int index = 0;
        int heighIndex = 0;
        int lowerIndex = 0;
        for (String price : ansArray) {

            index ++;

            String[] prs = StringUtils.split(price, "-");
            double buyPrice = Double.parseDouble(prs[0]);
            double sellPrice = Double.parseDouble(prs[1]);
            if (lower == 0) {
                lower = buyPrice;
            }

            if (sellPrice > higher) {
                System.out.println("    H:" + higher +"->" + sellPrice);
                higher = sellPrice;
//                flag = 1;
                heighIndex = index;
            }
            if (buyPrice < lower) {
                System.out.println("    L:" + lower +"->" + buyPrice);
                lower = buyPrice;
//                flag = -1;
                lowerIndex = index;
            }

            if ((sP == 0 && (higher - lower)/higher > 0.02 && lower > 0)) {
                if(!sellFlag) {
                    sellFlag = true;
                    System.out.println(index + " 卖出 " + higher + " = " + +lowerIndex + " " + heighIndex);
                    sP = sellPrice;
                    higher = sellPrice;
                }

            }
            if (sP > 0 && (sP - buyPrice)/sP > 0.02) {
                if(sellFlag){//下降
                    sellFlag = false;
                    System.out.println(index + " 买入 " + lower +" - " + higher +" " + heighIndex + " " + lowerIndex);
                    sP = 0;
                    higher = buyPrice;
                    lower = buyPrice;
                }

            }
        }
    }

    private void putAndCount(String price, TreeMap<Double,Integer> treeSet) {
        if (StringUtils.isBlank(price)) return;

        Double range = Double.parseDouble(price) * 10;
        double key = range.intValue()/10d;
        Integer integer = treeSet.get(key);
        if (null == integer) {
            integer = 0;
        }
        integer ++;
        treeSet.put(key, integer);
    }
}
